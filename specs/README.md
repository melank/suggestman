# Suggestman 仕様書

このディレクトリには、Suggestman プロジェクトの詳細な仕様書が格納されています。
仕様駆動開発（Specification Driven Development）のアプローチに基づき、実装前に仕様を明確に定義します。

## 仕様書の構成

### 1. [API.md](./API.md) - API 仕様書
全エンドポイントの詳細な仕様を定義します。

**内容**:
- エンドポイント一覧
- リクエスト/レスポンス形式
- 認証要件
- バリデーションルール
- ステータスコードとエラーレスポンス
- レート制限

**対象読者**: フロントエンド開発者、バックエンド開発者、API 利用者

### 2. [DATA.md](./DATA.md) - データ仕様書
データストレージの構造とスキーマを定義します。

**内容**:
- Workers KV のキー設計とデータ構造
- D1 データベーススキーマ（使用する場合）
- データバリデーションルール
- データライフサイクル（TTL、クリーンアップ）
- データマイグレーション戦略

**対象読者**: バックエンド開発者、データベース管理者

### 3. [AUTH.md](./AUTH.md) - 認証仕様書
認証・認可の仕組みと要件を定義します。

**内容**:
- 認証フロー（GitHub OAuth、Email/Password）
- JWT トークン仕様
- セッション管理
- セキュリティ要件
- パーミッション設計
- トークンリフレッシュ戦略

**対象読者**: バックエンド開発者、セキュリティ担当者

### 4. [FEATURES.md](./FEATURES.md) - 機能仕様書
ビジネスロジックと機能の詳細を定義します。

**内容**:
- 提案アルゴリズムの仕様
- フィルタリングロジック
- クールダウン機能
- タグシステム
- 気分ベースの選定ロジック
- 後押しメッセージ生成

**対象読者**: プロダクトマネージャー、バックエンド開発者

### 5. [ERRORS.md](./ERRORS.md) - エラーハンドリング仕様書
エラー処理の統一的な仕様を定義します。

**内容**:
- エラーコード体系
- エラーレスポンス形式
- エラーメッセージの多言語対応
- ログ出力仕様
- リトライポリシー

**対象読者**: 全開発者、運用担当者

## 仕様書の読み方

### 優先順位
1. **MVP 実装時**: API.md → AUTH.md → DATA.md → FEATURES.md → ERRORS.md
2. **新機能追加時**: FEATURES.md → API.md → DATA.md
3. **バグ修正時**: ERRORS.md → 該当する仕様書

### 仕様変更プロセス
1. 仕様書の変更提案（Issue または PR）
2. チームレビュー（AGENTS.md のチーム体制に基づく）
3. 仕様書の更新
4. 実装
5. テストと検証

### バージョン管理
- 仕様書は Git で管理
- 大きな仕様変更は別ブランチで作業
- 仕様確定後にメインブランチへマージ

## 仕様駆動開発（SDD）の原則

### 1. 仕様ファースト
実装前に仕様を明確に定義します。曖昧な部分があれば実装を開始しません。

### 2. 仕様の完全性
以下の要素を全て含む完全な仕様を目指します：
- 入力と出力
- 制約条件
- エッジケース
- エラーハンドリング
- パフォーマンス要件

### 3. レビュー可能性
仕様は独立してレビュー可能であり、実装なしで評価できる必要があります。

### 4. テスタビリティ
仕様から直接テストケースを導出できる必要があります。

### 5. トレーサビリティ
実装とテストは仕様にトレース可能でなければなりません。

## MVP スコープ

現在の MVP（Minimum Viable Product）では、以下の機能を実装します：

### 必須機能
- ✅ GitHub OAuth 認証
- ✅ メールアドレス/パスワード認証
- ✅ ユーザー登録・ログイン
- ✅ アイデアの CRUD 操作
- ✅ コンテキストベースの提案取得
- ✅ クールダウン機能
- ✅ タグベースのフィルタリング

### 今後の機能（Post-MVP）
- ⏳ 気分の自動検出
- ⏳ パーソナライズ機能
- ⏳ アイデアの共有機能
- ⏳ 統計・分析ダッシュボード
- ⏳ プッシュ通知

## 参考資料

- プロジェクト概要: [../README.md](../README.md)
- 開発ガイド: [../Claude.md](../Claude.md)
- チーム体制: [../AGENTS.md](../AGENTS.md)

## 仕様書の更新履歴

| 日付 | 仕様書 | 変更内容 | 変更者 |
|------|--------|----------|--------|
| 2025-01-15 | 全体 | 初版作成 | - |

## 質問・フィードバック

仕様に関する質問やフィードバックは、GitHub Issues で管理します。
仕様の曖昧さや矛盾を発見した場合は、速やかに Issue を作成してください。
